//==============================================================================================
//
// ステータスのレベルの表示　　　statuslevel.cpp
// 土田凌聖
//
//==============================================================================================

//**********************************************************************************************
// インクルード
//**********************************************************************************************
#include"statuslevel.h"
#include"number.h"

//==============================================================================================
// コンストラクタ
//==============================================================================================
CStatuslevel::CStatuslevel()
{
	m_nStatuslevel = 0;
}

//==============================================================================================
// コンストラクタ
//==============================================================================================
CStatuslevel::~CStatuslevel()
{
}

//==============================================================================================
// 初期化処理
//==============================================================================================
HRESULT CStatuslevel::Init(D3DXVECTOR3 pos)
{
	m_pNumber = CNumber::Create({ pos.x, pos.y, pos.z }, m_fWidth, m_fHeight);

	m_nStatuslevel = 1;
	SetStatuslevel(m_nStatuslevel);

	return S_OK;
}

//==============================================================================================
// 終了処理
//==============================================================================================
void CStatuslevel::Uninit()
{
	if (m_pNumber != nullptr)
	{
		m_pNumber->Uninit();
	}
}

//==============================================================================================
// 更新処理
//==============================================================================================
void CStatuslevel::Update()
{
}

//==============================================================================================
// 描画処理
//==============================================================================================
void CStatuslevel::Draw()
{
}

//==============================================================================================
// 生成処理
//==============================================================================================
CStatuslevel *CStatuslevel::Create(D3DXVECTOR3 pos, float width, float height)
{
	CStatuslevel *pStatuslevel = new CStatuslevel;

	if (pStatuslevel != nullptr)
	{
		pStatuslevel->SetSize(width, height);
		pStatuslevel->Init(pos);
	}

	return pStatuslevel;
}

//==============================================================================================
// 加算処理
//==============================================================================================
void CStatuslevel::AddStatuslevel(int statuslevel)
{
	m_nStatuslevel += statuslevel;

	// スコアの設定
	SetStatuslevel(m_nStatuslevel);
}

//==============================================================================================
// サイズの設定
//==============================================================================================
void CStatuslevel::SetSize(float width, float height)
{
	m_fWidth = width;
	m_fHeight = height;
}

//==============================================================================================
// スコアの設定
//==============================================================================================
void CStatuslevel::SetStatuslevel(int statuslevel)
{
	m_nStatuslevel = statuslevel;

	if (m_nStatuslevel < MAX_STATUSLEVLE)
	{
		m_pNumber->SetTexPos(0.0f, 1.0f, 0.1f * m_nStatuslevel + 0.1f, 0.1f * m_nStatuslevel);
	}
	else
	{
		m_pTexture = CTexture::TEXTURE_LEVELMAX;

		// テクスチャの設定
		m_pNumber->Settexture(&m_pTexture);

		// 位置の設定
		m_pNumber->SetTexPos(0.0f, 1.0f, 1.0f, 0.0f);

		// サイズの設定
		m_pNumber->SetSize(40.0f, 40.0f);
	}
}

//==============================================================================================
// 色の設定
//==============================================================================================
void CStatuslevel::SetCol(D3DXCOLOR col)
{
	m_pNumber->Setcollar(&col);
}